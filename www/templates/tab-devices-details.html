<ion-view title="{{ 'DEVICES_DETAILS.tabTitle' | translate }}">
  
  <ion-content class="padding">

    <div class="alert" ng-class="connected ? 'alert-success' : 'alert-warning'" ng-show="test">
      <p ng-show="!connected"><strong>{{ 'DEVICES_DETAILS.alerts.APItestFail' | translate }}</strong></p>
      <p ng-show="connected"><strong>{{ 'DEVICES_DETAILS.alerts.APItestSuccess' | translate }}</strong></p>
      <p ng-show="connected"><small>{{ 'DEVICES_DETAILS.alerts.APIversion' | translate }}: {{connected.result.popcornVersion}}</small></p>
    </div>
    <!-- /.alert -->

    <div class="alert alert-error" ng-show="error">
      <p><small><strong>{{ 'DEVICES_DETAILS.alerts.APIerror' | translate }}:</strong> {{error.message}}</small></p>
    </div>
    <!-- /.alert -->

    <div class="alert alert-info" ng-show="saved">
      <p><strong>{{ 'DEVICES_DETAILS.alerts.changesSaved' | translate }}</strong></p>
    </div>
    <!-- /.alert -->
    
    <form name="deviceForm" ng-submit="deviceForm.$valid && editDevice(device)" novalidate>
      
      <div class="list">

        <label class="item item-input item-stacked-label">
          <span class="input-label">{{ 'DEVICES_DETAILS.editForm.name' | translate }} 
            <small class="assertive" ng-show="formSubmitted && deviceForm.name.$error.required">{{ 'DEVICES_DETAILS.editFormValidation.required' | translate }}</small>
          </span>

          <input type="text" placeholder="{{ 'DEVICES_DETAILS.editForm.namePlaceholder' | translate }}" name="name" ng-model="device.name" required device-feedback>
        </label>
        <!-- /.item -->

        <label class="item item-input item-stacked-label">
          <span class="input-label">{{ 'DEVICES_DETAILS.editForm.ip' | translate }} 
            <small class="assertive" ng-show="formSubmitted && deviceForm.ip.$error.required">{{ 'DEVICES_DETAILS.editFormValidation.required' | translate }}</small>
            <small class="assertive" ng-show="formSubmitted && deviceForm.ip.$error.pattern">{{ 'DEVICES_DETAILS.editFormValidation.format' | translate }}</small>
          </span>

          <input type="text" placeholder="0.0.0.0" name="ip" ng-model="device.ip" ng-pattern='/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/' required device-feedback>
        </label>
        <!-- /.item -->

        <label class="item item-input item-stacked-label">
          <span class="input-label">{{ 'DEVICES_DETAILS.editForm.port' | translate }}
            <small class="assertive" ng-show="formSubmitted && deviceForm.port.$error.required">{{ 'DEVICES_DETAILS.editFormValidation.required' | translate }}</small>
            <small class="assertive" ng-show="formSubmitted && deviceForm.port.$error.pattern">{{ 'DEVICES_DETAILS.editFormValidation.format' | translate }}</small>
          </span>

          <input type="text" placeholder="8008" name="port" ng-model="device.port" ng-pattern="/^[0-9]{1,7}$/" required device-feedback>
        </label>
        <!-- /.item -->

        <label class="item item-input item-stacked-label">
          <span class="input-label">{{ 'DEVICES_DETAILS.editForm.username' | translate }}
            <small class="assertive" ng-show="formSubmitted && deviceForm.user.$error.required">{{ 'DEVICES_DETAILS.editFormValidation.required' | translate }}</small>
          </span>

          <input type="text" placeholder="popcorn" name="user" ng-model="device.user" required device-feedback>
        </label>
        <!-- /.item -->

        <label class="item item-input item-stacked-label">
          <span class="input-label">{{ 'DEVICES_DETAILS.editForm.password' | translate }}
            <small class="assertive" ng-show="formSubmitted && deviceForm.pass.$error.required">{{ 'DEVICES_DETAILS.editFormValidation.required' | translate }}</small>
          </span>

          <input type="text" placeholder="popcorn" name="pass" ng-model="device.pass" required device-feedback>
        </label>
        <!-- /.item -->

      </div>
      <!-- /.list -->

      <div class="button-bar">
        <button type="submit" class="button button-small button-balanced" ng-click="submitAttempt();" device-feedback>{{ 'DEVICES_DETAILS.editFormButtons.saveButton' | translate }}</button>
        <a class="button button-small button-royal" ng-click="setActive();" device-feedback>{{ 'DEVICES_DETAILS.editFormButtons.useButton' | translate }}</a>
        <a class="button button-small button-energized" ng-click="testDevice(device);" device-feedback>{{ 'DEVICES_DETAILS.editFormButtons.testButton' | translate }}</a>
        <a class="button button-small button-assertive" ng-click="remove();" device-feedback>{{ 'DEVICES_DETAILS.editFormButtons.deleteButton' | translate }}</a>
      </div>

    </form>
    <!-- /deviceForm -->

  </ion-content>

</ion-view>
